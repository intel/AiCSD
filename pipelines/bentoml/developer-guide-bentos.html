
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="deploy-bentos.html" rel="prev"/>
<link href="image-classification-demo.html" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.50" name="generator"/>
<title>Developer Guide for Bentos - AiCSD Reference Implementation</title>
<link href="../../assets/stylesheets/main.a40c8224.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../stylesheets/index.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<link href="../../stylesheets/branding.css" rel="stylesheet"/>
<link href="../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#developer-guide">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="AiCSD Reference Implementation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="AiCSD Reference Implementation">
<img alt="logo" src="../../images/logo-white-75px.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            AiCSD Reference Implementation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Developer Guide for Bentos
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/intel/AiCSD" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    intel/AiCSD
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../index.html">
          
  
  Home

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/what-to-expect.html">
          
  
  Get Started

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../pipeline-creation.html">
          
  
  Pipelines

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../services/general-info.html">
          
  
  Services

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../monitoring/overview.html">
          
  
  Tools Suite

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../security/security-docs.html">
        
  
    
  
  Security

      </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="AiCSD Reference Implementation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="AiCSD Reference Implementation">
<img alt="logo" src="../../images/logo-white-75px.png"/>
</a>
    AiCSD Reference Implementation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/intel/AiCSD" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    intel/AiCSD
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-ellipsis">
    Home
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Home
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../index.html">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Get Started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
<span class="md-ellipsis">
    Prerequisites
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
            Prerequisites
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/what-to-expect.html">
<span class="md-ellipsis">
    What to Expect
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/install-prereqs.html">
<span class="md-ellipsis">
    Set Up
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    System Setup
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            System Setup
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/choose-config.html">
<span class="md-ellipsis">
    Configure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/system-setup.html">
<span class="md-ellipsis">
    Build and Deploy
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    Manage
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Manage
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/basic-workflow.html">
<span class="md-ellipsis">
    Start Workflow
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/tear-down.html">
<span class="md-ellipsis">
    Tear Down
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-ellipsis">
    Web UI
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            Web UI
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/ms-web-ui-guide.html">
<span class="md-ellipsis">
    Workspace
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/ms-web-ui-guide-tasks.html">
<span class="md-ellipsis">
    Tasks
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/ms-web-ui-guide-jobs.html">
<span class="md-ellipsis">
    Jobs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/ms-web-ui-guide-upload-model.html">
<span class="md-ellipsis">
    Model Upload
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/ms-web-ui-guide-dashboards.html">
<span class="md-ellipsis">
    Dashboards
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
<span class="md-ellipsis">
    Get Help
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
            Get Help
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/troubleshooting.html">
<span class="md-ellipsis">
    Troubleshooting
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-ellipsis">
    Pipelines
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Pipelines
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../pipeline-creation.html">
<span class="md-ellipsis">
    Create a Pipeline
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
<span class="md-ellipsis">
    Intel Geti
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            Intel Geti
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../geti/deployment.html">
<span class="md-ellipsis">
    Deployment
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
<span class="md-ellipsis">
    Intel OpenVINO™ Model Server
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Intel OpenVINO™ Model Server
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ovms/ovms.html">
<span class="md-ellipsis">
    OVMS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
<span class="md-ellipsis">
    BentoML
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            BentoML
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="introduction-bentos.html">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="create-bentos.html">
<span class="md-ellipsis">
    Create Bentos
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="deploy-bentos.html">
<span class="md-ellipsis">
    Deploy Bentos
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Developer Guide for Bentos
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="developer-guide-bentos.html">
<span class="md-ellipsis">
    Developer Guide for Bentos
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflow">
<span class="md-ellipsis">
      Workflow
    </span>
</a>
<nav aria-label="Workflow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ml-pipeline-creation">
<span class="md-ellipsis">
      ML Pipeline Creation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bentoml-service-creation-deployment">
<span class="md-ellipsis">
      BentoML Service Creation &amp; Deployment
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#end-to-end-ml-pipeline-execution">
<span class="md-ellipsis">
      End to End ML Pipeline Execution
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="image-classification-demo.html">
<span class="md-ellipsis">
    Image Classification Demo
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
<span class="md-ellipsis">
    Elyra
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            Elyra
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../elyra/elyra.html">
<span class="md-ellipsis">
    ML Pipeline Visual Editor Tool
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Services
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Services
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/general-info.html">
<span class="md-ellipsis">
    General Information
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-ellipsis">
    OEM
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            OEM
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/ms-file-watcher.html">
<span class="md-ellipsis">
    File Watcher
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/ms-data-organizer.html">
<span class="md-ellipsis">
    Data Organizer
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/ms-file-sender-oem.html">
<span class="md-ellipsis">
    File Sender OEM
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/as-file-receiver-oem.html">
<span class="md-ellipsis">
    File Receiver OEM
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
<span class="md-ellipsis">
    Gateway
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            Gateway
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/ms-job-repository.html">
<span class="md-ellipsis">
    Job Repository
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/ms-web-ui.html">
<span class="md-ellipsis">
    Web UI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/ms-file-receiver-gateway.html">
<span class="md-ellipsis">
    Receiver Gateway
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/as-task-launcher.html">
<span class="md-ellipsis">
    Task Launcher
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/as-file-sender-gateway.html">
<span class="md-ellipsis">
    File Sender Gateway
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
<span class="md-ellipsis">
    Pipelines
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
            Pipelines
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/as-pipeline-sim.html">
<span class="md-ellipsis">
    Pipeline Simulator
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/as-pipeline-val.html">
<span class="md-ellipsis">
    Pipeline Validator
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-ellipsis">
    Tests
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            Tests
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/integration-tests.html">
<span class="md-ellipsis">
    Integration Tests
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Tools Suite
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Tools Suite
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
<span class="md-ellipsis">
    Monitoring
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
            Monitoring
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../monitoring/overview.html">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../monitoring/telegraf.html">
<span class="md-ellipsis">
    Telegraf
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../monitoring/influxdb.html">
<span class="md-ellipsis">
    InfluxDB
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../monitoring/grafana.html">
<span class="md-ellipsis">
    Grafana
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    Log Analytics
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            Log Analytics
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../log-analytics/overview.html">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../log-analytics/elasticsearch.html">
<span class="md-ellipsis">
    Elasticsearch
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../log-analytics/filebeat.html">
<span class="md-ellipsis">
    Filebeat
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../log-analytics/kibana.html">
<span class="md-ellipsis">
    Kibana
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
<span class="md-ellipsis">
    Get Help
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
            Get Help
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../troubleshooting-tools.html">
<span class="md-ellipsis">
    Tools Troubleshooting
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/security-docs.html">
<span class="md-ellipsis">
    Security
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="developer-guide">Developer Guide<a class="headerlink" href="#developer-guide" title="Permanent link">¶</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<p>This Developer Guide will walk you through the steps required to create your own BentoML services and integrate them with the AiCSD Project.</p>
<h2 id="workflow">Workflow<a class="headerlink" href="#workflow" title="Permanent link">¶</a></h2>
<p>As a Data Scientist, Machine Learning Engineer, or Software/Solutions Engineer building AI/ML software or solutions, BentoML provides an easy way to create, containerize, and deploy ML pipelines as docker services which can then be integrated with the AiCSD project for automatic transfer of scientific images. These images are captured using OEM devices connected to microscopes, cameras, etc. and are transferred to a higher compute Gateway device. The ML pipelines are executed on the Gateway by applying image processing models and by making meaningful inferences to generate output images or results.</p>
<figure class="figure-image">
<img alt="Figure 1: ML Pipeline Service Development &amp; Deployment Workflow" src="../../images/ProcessWorkflow.jpg"/>
<figcaption>Figure 1: ML Pipeline Service Development &amp; Deployment Workflow</figcaption>
</figure>
<h3 id="ml-pipeline-creation"><strong>ML Pipeline Creation</strong><a class="headerlink" href="#ml-pipeline-creation" title="Permanent link">¶</a></h3>
<ol>
<li>
<p>Develop the initial code for AI-assisted image processing and inferencing. Test it out locally to ensure results are as expected.</p>
</li>
<li>
<p>Either add the model directly to the AiCSD project's <strong>models</strong> folder(and update <strong>config.json</strong> if OpenVINO is used for inferencing) or use the <a href="../../getting-started/ms-web-ui-guide-upload-model.html">Upload Models</a> feature of the UI. Model directory structure must follow the OVMS structure with a subdirectory named <strong>1</strong> and everything else falling inside this as subdirectories.</p>
</li>
<li>
<p>ML pipelines with no models can also be created. However, make sure to either upload the zipped folder with an empty subdirectory of 1 or add the directory with an empty subdirectory of 1 under the AiCSD project's <strong>models</strong> folder(and update <strong>config.json</strong> if OpenVINO is used for inferencing). Name of this directory will appear in the pipeline dropdown while <a href="../../getting-started/ms-web-ui-guide-tasks.html">Creating a New Task</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>If the directory (with or without model) is not uploaded, then the ML pipeline will not be created. It will not be displayed in the pipeline dropdown while <a href="../../getting-started/ms-web-ui-guide-tasks.html">Creating a New Task</a></li>
<li>Model directory structure must follow the <a href="https://docs.openvino.ai/latest/ovms_docs_models_repository.html">OVMS guidelines</a> with sub-directory named <strong>1</strong> and everything else falling inside this as files or sub-directories.</li>
</ul>
</div>
</li>
<li>
<p>For integrating the user defined ML pipeline with AiCSD, the below mentioned files need to be included in the project directory. These files for the sample image classification demo can be used as reference during development. These files are present under the <strong>demos</strong> folder in the AiCSD project repo.</p>
<ul>
<li>
<p><strong>paho_mqtt_client.py</strong> - Start a MQTT client listening to request coming from the AiCSD containers</p>
</li>
<li>
<p><strong>pythonClientConfig.yaml</strong> - Configuration file for the ML pipeline, <strong>gateway_ip</strong>, and <strong>service/POST_url</strong> should be set by the user with the Gateway IP address</p>
</li>
<li>
<p><strong>helper.py</strong> - Functions to create response to be sent back to the AiCSD containers</p>
</li>
<li>
<p><strong>service.py</strong> - User defined inference program is converted into a BentoML API service using this file</p>
</li>
<li>
<p><strong>bentofile.yaml</strong> - Configuration file for building a BentoML service</p>
</li>
<li>
<p><strong>Makefile</strong> - Automate the BentoML CLI commands and MQTT client to build and run bentos and the MQTT client docker containers</p>
</li>
</ul>
</li>
<li>
<p>Ensure the following for integration with AiCSD</p>
<ul>
<li>
<p>Modify <strong>main</strong> function - add it as a function that will be called from the BentoML  <strong>service.py</strong> file and processing results will be sent back as response.</p>
</li>
<li>
<p>Import the user defined ML pipeline as a package inside <strong>service.py</strong></p>
</li>
<li>
<p><strong>service.py</strong> expects the input in the following json format:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"InputFileLocation"</span><span class="p">:</span><span class="s2">"/path/to/input file"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"OutputFileFolder"</span><span class="p">:</span><span class="s2">"/path/to/output files"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"ModelParams"</span><span class="p">:{</span><span class="s2">"model parameters specific to the pipeline"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"JobUpdateUrl"</span><span class="p">:</span><span class="s2">"REST API endpoint for updating job"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"PipelineStatusUrl"</span><span class="p">:</span><span class="s2">"REST API endpoint for updating pipeline status"</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="nt">"GatewayIP"</span><span class="p">:</span><span class="s2">"gateway IP address"</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<ul>
<li>
<p>Within the <strong>@svc.api</strong> inside <strong>service.py</strong>, make calls to the user defined ML pipeline passing the input and output file paths and then store the response as results. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When deploying BentoML service as docker containers, the Input/Output file path will be <strong>/tmp/files/input</strong> and <strong>/tmp/files/output</strong> which are the paths mapped through volume mount during docker execution. If service is deployed locally then these should be absolute filesystem paths.</p>
</div>
</li>
<li>
<p>Import <strong>helper.py</strong> inside the user defined ML pipeline as a package to create the response. AiCSD expects the response in the following format -</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"Status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"PipelineComplete"</span><span class="p">,</span><span class="w"> </span><span class="c1">// or "PipelineFailed"</span>
<span class="w">    </span><span class="nt">"QCFlags"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Quality Control string, can be empty"</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="nt">"OutputFiles"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"[</span>
<span class="s2">        {</span>
<span class="s2">            "</span><span class="err">DirName</span><span class="s2">": "</span><span class="err">/pa</span><span class="kc">t</span><span class="err">h/</span><span class="kc">t</span><span class="err">o/</span><span class="kc">f</span><span class="err">ile</span><span class="s2">",</span>
<span class="s2">            "</span><span class="err">Name</span><span class="s2">": "</span><span class="kc">f</span><span class="err">ile_</span><span class="kc">na</span><span class="err">me.ex</span><span class="kc">tens</span><span class="err">io</span><span class="kc">n</span><span class="s2">",</span>
<span class="s2">            "</span><span class="err">Ex</span><span class="kc">tens</span><span class="err">io</span><span class="kc">n</span><span class="s2">": "</span><span class="kc">f</span><span class="err">ile</span><span class="w"> </span><span class="err">ex</span><span class="kc">tens</span><span class="err">io</span><span class="kc">n</span><span class="w"> </span><span class="err">wi</span><span class="kc">t</span><span class="err">hou</span><span class="kc">t</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">.</span><span class="s2">",</span>
<span class="s2">            "</span><span class="err">S</span><span class="kc">tatus</span><span class="s2">": "</span><span class="err">curre</span><span class="kc">nt</span><span class="w"> </span><span class="err">s</span><span class="kc">tatus</span><span class="w"> </span><span class="mi">-</span><span class="w"> </span><span class="err">ca</span><span class="kc">n</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">emp</span><span class="kc">t</span><span class="err">y</span><span class="s2">",</span>
<span class="s2">            "</span><span class="err">ErrorDe</span><span class="kc">ta</span><span class="err">ils</span><span class="s2">": "</span><span class="err">de</span><span class="kc">ta</span><span class="err">iled</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">message</span><span class="mi">-</span><span class="w"> </span><span class="err">ca</span><span class="kc">n</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">emp</span><span class="kc">t</span><span class="err">y</span><span class="s2">",</span>
<span class="s2">            "</span><span class="err">Ow</span><span class="kc">ner</span><span class="s2">": "</span><span class="err">curre</span><span class="kc">nt</span><span class="w"> </span><span class="err">ow</span><span class="kc">ner</span><span class="w"> </span><span class="mi">-</span><span class="w"> </span><span class="err">ca</span><span class="kc">n</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">emp</span><span class="kc">t</span><span class="err">y</span><span class="s2">"</span>
<span class="s2">        },</span>
<span class="s2">        {</span>
<span class="s2">            // repeat as necessary</span>
<span class="s2">        }</span>
<span class="s2">    ], </span>
<span class="s2">    "</span><span class="err">Resul</span><span class="kc">ts</span><span class="s2">" : "</span><span class="err">a</span><span class="kc">n</span><span class="err">y</span><span class="w"> </span><span class="err">resul</span><span class="kc">ts</span><span class="w"> </span><span class="err">s</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">displayed</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">AiCSD</span><span class="w"> </span><span class="err">UI"</span>
<span class="err">    }</span>
</code></pre></div>
<ul>
<li>
<p>Refer to <a href="../pipeline-creation.html">Job Repository Update</a> for more details on pipeline callbacks.</p>
</li>
<li>
<p>It is important to follow the order of callbacks within <strong>@svc.api</strong> inside <strong>service.py</strong>. Job must be updated first followed by Task.</p>
</li>
<li>
<p>It is mandatory to update the <strong>Status</strong> field as <strong>PipelineComplete</strong> or <strong>PipelineFailed</strong> for reflecting the correct job status on <a href="../../getting-started/ms-web-ui-guide-jobs.html">AiCSD UI</a>.</p>
</li>
<li>
<p>Set <strong>gateway_ip</strong> in <strong>pythonClientConfig.yaml</strong> file.</p>
</li>
<li>
<p>MQTT client is listening to AiCSD's EdgeX MQTT Broker on topic <strong>mqtt-export/pipeline/params</strong>.</p>
</li>
<li>
<p>Other MQTT parameters like port can be configured in <strong>pythonClientConfig.yaml</strong>.</p>
</li>
<li>
<p>ML pipeline bento service configurations, like port etc, can be configured within <strong>bentoml.yaml</strong>. Thus multiple pipelines can be configured to run on different ports for scalability.</p>
</li>
<li>
<p>Logger() doesn't work inside the BentoML container/terminal logs, use print() for logging purposes. </p>
</li>
</ul>
</li>
</ol>
<h3 id="bentoml-service-creation-deployment"><strong>BentoML Service Creation &amp; Deployment</strong><a class="headerlink" href="#bentoml-service-creation-deployment" title="Permanent link">¶</a></h3>
<ol>
<li>
<p>To avoid any package incompatibility issues, it is <strong>highly</strong> recommended to install and use <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html">conda</a> environment.</p>
</li>
<li>
<p>Create and activate a new conda environment 
   <div class="highlight"><pre><span></span><code>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>bentoml_env
conda<span class="w"> </span>activate<span class="w"> </span>bentoml_env
</code></pre></div></p>
</li>
<li>
<p>Change directory to the ML pipeline project eg. <strong>demos/image_classification_example</strong></p>
</li>
<li>
<p>Install prerequisites 
   <div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div></p>
</li>
<li>Build BentoML services following steps mentioned <a href="create-bentos.html">here</a>
<div class="highlight"><pre><span></span><code>bentoml<span class="w"> </span>build
</code></pre></div></li>
<li>
<p>Note the bento tags - <strong>bento_image_name:bento_image_tag</strong> as displayed in <em>Figure 2</em>
<br/>
<figure class="figure-image">
<img alt="Figure 2: Successful BentoML Creation" src="../../images/BentoMLBuild.jpg"/>
<figcaption>Figure 2: Successful BentoML Creation</figcaption>
</figure>
</p>
</li>
<li>
<p>Deploy with commands mentioned <a href="deploy-bentos.html">here</a></p>
<ul>
<li>Deploy Locally</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>bentoml<span class="w"> </span>serve
</code></pre></div>
<p>or</p>
<ul>
<li>Deploy Container</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w"> </span>bentoml<span class="w"> </span>containerize<span class="w"> </span>&lt;bento_image_name&gt;:latest
<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>-p<span class="w"> </span><span class="m">3000</span>:3000<span class="w"> </span>-v<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/data/gateway-files:/tmp/files<span class="w"> </span>&lt;bento_image_name&gt;:&lt;bento_image_tag&gt;<span class="w"> </span>serve<span class="w"> </span>--production
</code></pre></div>
</li>
<li>
<p>Verify if service is deployed by opening Swagger API UI - <strong>http://0.0.0.0:3000</strong></p>
<p>Service can be tested by providing the following json input</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both AiCSD Services and the python MQTT client should be running for successful response. Refer to <a href="#end-to-end-ml-pipeline-execution">Build &amp; Deploy</a> for more information.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"InputFileLocation"</span><span class="p">:</span><span class="s2">"/tmp/files/input/1.tiff"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"OutputFileFolder"</span><span class="p">:</span><span class="s2">"/tmp/files/output"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"ModelParams"</span><span class="p">:{</span><span class="nt">"Brightness"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"JobUpdateUrl"</span><span class="p">:</span><span class="s2">"http://job-repository:59784/api/v1/job/pipeline/7c9fdbde-3b56-48af-a405-51d718cd9711/15c40f2d-68d2-4f09-9133-23f101b8b660"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"PipelineStatusUrl"</span><span class="p">:</span><span class="s2">"http://task-launcher:59785/api/v1/pipelineStatus/7c9fdbde-3b56-48af-a405-51d718cd9711/15c40f2d-68d2-4f09-9133-23f101b8b660"</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="nt">"GatewayIP"</span><span class="p">:</span><span class="s2">"192.168.0.20"</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p><figure class="figure-image">
<img alt="Figure 3: Successful Swagger API Response" src="../../images/SwaggerAPIResponse.jpg"/>
<figcaption>Figure 3: Successful Swagger API Response</figcaption>
</figure></p>
</li>
<li>
<p>Verify if container is deployed by checking <a href="../../getting-started/troubleshooting.html">Portainer</a></p>
</li>
</ol>
<h3 id="end-to-end-ml-pipeline-execution"><strong>End to End ML Pipeline Execution</strong><a class="headerlink" href="#end-to-end-ml-pipeline-execution" title="Permanent link">¶</a></h3>
<ol>
<li>
<p>To avoid any package incompatibility issues, it is <strong>highly</strong> recommended to install and use the <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html">conda</a> environment.</p>
</li>
<li>
<p>Create and activate a new conda environment 
   <div class="highlight"><pre><span></span><code>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>bentoml_env
conda<span class="w"> </span>activate<span class="w"> </span>bentoml_env
</code></pre></div></p>
</li>
<li>
<p>Change directory to the AiCSD project root folder on the Gateway.</p>
</li>
<li>
<p>Clean the workspace
 <div class="highlight"><pre><span></span><code><span class="w"> </span>make<span class="w"> </span>clean-volumes<span class="w"> </span>clean-images<span class="w"> </span>clean-files
</code></pre></div></p>
</li>
<li>
<p><a href="../../getting-started/system-setup.html">Build &amp; Deploy</a> all AiCSD Containers
 <div class="highlight"><pre><span></span><code><span class="w"> </span>make<span class="w"> </span>docker
<span class="w"> </span>make<span class="w"> </span>run-geti<span class="w"> </span>run-ovms
</code></pre></div></p>
</li>
<li>
<p>Change directory to the <strong>demos/custom pipeline</strong> folder in the AiCSD project repo.</p>
</li>
<li>
<p>Install prerequisites 
   <div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div></p>
</li>
<li>
<p>If any existing bento and MQTT client docker containers are running, then stop and remove them using <strong>make</strong> commands run inside the <strong>demos/custom pipeline</strong> folder in the AiCSD project repo.
 <div class="highlight"><pre><span></span><code><span class="w"> </span>make<span class="w"> </span>down<span class="w"> </span><span class="nv">BENTO_TAG</span><span class="o">=</span>&lt;bento_image_name&gt;:&lt;bento_image_tag&gt;
</code></pre></div>
Old BENTO_TAGs (eg. <strong>image_classification:px4jhnqscwuntqls</strong>) can be found under <strong>Images</strong> section in <a href="../../getting-started/troubleshooting.html">Portainer</a></p>
</li>
<li>
<p>Set <strong>gateway_ip</strong> and <strong>service/POST_url</strong> in pythonClientConfig.yaml file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>gateway_ip</strong> can be obtained using this command:
<div class="highlight"><pre><span></span><code><span class="w"> </span>hostname<span class="w"> </span>-I
</code></pre></div></p>
</div>
</li>
<li>
<p>Run <strong>make</strong> commands inside the <strong>demos/custom pipeline</strong> folder in the AiCSD project repo.
 <div class="highlight"><pre><span></span><code><span class="w"> </span>make<span class="w"> </span>build<span class="w"> </span>
<span class="w"> </span>make<span class="w"> </span>docker-build<span class="w"> </span><span class="nv">BENTO_TAG</span><span class="o">=</span>&lt;bento_image_name&gt;:&lt;bento_image_tag&gt;
<span class="w"> </span>make<span class="w"> </span>run<span class="w"> </span><span class="nv">BENTO_TAG</span><span class="o">=</span>&lt;bento_image_name&gt;:&lt;bento_image_tag&gt;
</code></pre></div>
<strong>bento_image_name:bento_image_tag</strong> should be copied from the output from <code>make build</code> command.
 For more details on these individual bentoml build and run commands refer to <a href="#bentoml-service-creation-deployment">Build &amp; Deploy BentoML services</a> </p>
</li>
<li>
<p>Follow steps for <a href="../../getting-started/basic-workflow.html">Basic Workflow</a> to create a new Task, drop the image file for processing and view the results on the UI.</p>
</li>
</ol>
<p>Refer to Complete Demo: <a href="image-classification-demo.html">Image Classification</a></p>
<p>BSD 3-Clause License: See <a href="../../LICENSE.html">License</a>.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "search.suggest", "search.highlight", "navigation.top", "toc.integrate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
<script src="https://unpkg.com/lunr/lunr.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>